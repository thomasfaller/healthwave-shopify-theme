/** BC Most Popular Products By BoostCommerce - boostcommerce.net. Please don't modify or unzip this content. It will be updated regularly **/
/** VERSION 0.0.4 **/
var jQ=jQuery.noConflict(!0),BCPopularProduct=function(){this.settings={mostPopularEnable:!0,limit:8,popularProductSliderRange:5,isCollectionPage:!1,showOnCollectionPage:!1},this.translation={popularProductsHeading:"Most Popular Products"},this.selector={popupProductWrapperSelector:".bc-sf-most-popular-products-wrapper",popupProductSliderSelector:".bc-sf-most-popular-products.owl-carousel"}};BCPopularProduct.prototype.init=function(t,o){var r=this;r.mpPrepareParams(t,o),r.settings.mostPopularEnable&&(r.savePopularProduct(),r.popularProductInitCarousel(r.selector.popupProductSliderSelector,r.settings.popularProductSliderRange,!0,!0))},BCPopularProduct.prototype.mpPrepareParams=function(t,o){void 0===t||jQ.isEmptyObject(t)||this.mpPrepareFilterAppParams(t),void 0===o||jQ.isEmptyObject(o)||this.mpPrepareDevParams(o)},BCPopularProduct.prototype.mpPrepareFilterAppParams=function(t){var o=this;void 0!==t.mostPopular&&o.mpUpdateParams(t.mostPopular),void 0!==t.label&&void 0!==t.label&&"undefined"!==t.label.mostPopular&&(this.translation=o.mergeObjects(o.translation,t.label.mostPopular))},BCPopularProduct.prototype.mpPrepareDevParams=function(t){this.mpUpdateParams(t)},BCPopularProduct.prototype.mpUpdateParams=function(t){var o=this;void 0!==t&&(void 0!==t.settings&&(this.settings=o.mergeObjects(o.settings,t.settings)),void 0!==t.translation&&(this.translation=o.mergeObjects(o.translation,t.translation)),void 0!==t.selector&&(this.selector=o.mergeObjects(o.selector,t.selector)))},BCPopularProduct.prototype.savePopularProduct=function(){var e=this;jQ.ajax({url:window.location.href+"?view=most-popular&sort_by=best-selling",type:"GET",async:!1,success:function(t){var o=jQ(t).find(".bc-most-popular-product-id").data("handle").split(",");jQ.each(o,function(t,o){t<e.settings.limit&&""!=o&&jQ.ajax({method:"GET",async:!1,url:"/products/"+o.trim()+"?view=bc-sf-filter-json",success:function(t){var o=jQ(e.selector.popupProductSliderSelector),r=bcsffilter.buildProductGridItem(JSON.parse(t));o.append(r)},complete:function(){console.log("complete")},error:function(){console.log("Failed to load Most Popular Products")}})})}}),jQ(e.selector.popupProductWrapperSelector).prepend('<h2 class="bc-sf-most-popular-product-heading">'+e.translation.popularProductsHeading+"</h2>")},BCPopularProduct.prototype.checkShowRecentProducts=function(){return!(!this.settings.showOnCollectionPage||!this.settings.isCollectionPage)},BCPopularProduct.prototype.popularProductInitCarousel=function(t,o,r,e){0<jQ(t).length&&0<jQ(t).find("img").length&&setTimeout(function(){jQ(t).owlCarousel({loop:e||!1,nav:r||!1,responsiveClass:!0,responsive:{0:{items:2},600:{items:2},1024:{items:3},1200:{items:o||4,loop:!1}}})},1e3)},BCPopularProduct.prototype.mergeObjects=function(o,r){for(var e in r)try{o[e]=r[e].constructor==Object?mergeObject(o[e],r[e]):r[e]}catch(t){o[e]=r[e]}return o};